<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>BestOf</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
  <!--Load the AJAX API-->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">

    // Load the Visualization API and the controls package.
    google.charts.load('current', {'packages':['corechart', 'controls']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawDashboard);

    // Callback that creates and populates a data table,
    // instantiates a dashboard, a range slider and a pie chart,
    // passes in the data and draws it.
    function drawDashboard() {

      // Create our data table.
        var data = google.visualization.arrayToDataTable([
          ['Pop', 0, 28, 28, 100],
          ['Rock', 0, 38, 38, 100],
          ['Jazz', 0, 55, 55, 100],
          ['Electronic', 0, 77, 77, 100],
          ['Classic', 0, 66, 66, 100]
          // Treat first row as data as well.
        ], true);

      // Create a dashboard.
      var dashboard = new google.visualization.Dashboard(
        document.getElementById('dashboard_div'));

      // Create a range slider, passing some options
      var numberRangeSlider = new google.visualization.ControlWrapper({
        'controlType': 'NumberRangeFilter',
        'containerId': 'filter_div',
        'options': {
          'ui': {'label':'Number of songs range', 'labelSeparator': ':'},
          'filterColumnIndex': 2,
          'minValue': 0,
          'maxValue': 100
        },
        'state': {'lowValue': 0, 'highValue': 100}
      });
      // Create a pie chart, passing some options
      var CandlestickChart = new google.visualization.ChartWrapper({
          'chartType': 'CandlestickChart',
          'containerId': 'chart_div',
          'options': {
            'width': 1224,
            'height': 220,
            'animation.duration': 500,
            'animation.easing': 'inAndOut',
            'animation.startup': true,
            'hAxis': {'title': 'Genre', 'titleTextStyle': { 'fontSize': 20, 'bold': true, 'italic': false  } },
            'vAxis': {'title': 'Number of songs', 'titleTextStyle': { 'fontSize': 20, 'bold': true, 'italic': false } },
            'tooltip': {'showColorCode': false, 'trigger': 'none'},
            'legend' : {'position':'none'}
        }
//        'view': {'colums': [0,1]}
      });

      var GenreFilter = new google.visualization.ControlWrapper({
        'controlType': 'StringFilter',
        'containerId': 'filter_div2',
        'options': {
          'ui': {'label':'Genre filter', 'labelSeparator': ':'},
          'filterColumnIndex': 0,
          'matchType': 'any'
        },
        'state': {'value':''}
      });


      // Establish dependencies, declaring that 'filter' drives 'pieChart',
      // so that the pie chart will only display entries that are let through
      // given the chosen slider range.
      dashboard.bind([numberRangeSlider,GenreFilter], CandlestickChart);

      // Draw the dashboard.
      dashboard.draw(data);

//      google.visualization.events.addListener(GenreFilter, 'statechange', stateChangeHandler);
//      function stateChangeHandler(e) {
//          newState = ControlWrapper.getState()
//          genre = newState;

//          GenreFilter.setState(newState)
//          GenreFilter.draw();
//      }

    }
  </script>
</head>
<body>
  <app-root></app-root>
</body>
</html>

<html>
<head>

</head>

<body>
<!--Div that will hold the pie chart-->
</body>
</html>
